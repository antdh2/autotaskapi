{% extends 'base.html' %}
{% load staticfiles %}
{% block page %}

<!-- BEGIN CONTENT -->
<div class="page-content-wrapper">
  <div class="page-content">
    <div class="row">
        <div class="col-md-8">
            <div class="portlet light ">
                <div class="portlet-title tabbable-line">
                    <div class="caption caption-md">
                        <i class="icon-globe theme-font hide"></i>
                        <span class="caption-subject font-blue-madison bold uppercase">Configure Input Validation</span>
                    </div>
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#tab_2_1" data-toggle="tab">Tickets</a>
                        </li>
                        <li>
                            <a href="#tab_2_2" data-toggle="tab">Opportunities</a>
                        </li>
                    </ul>
                </div>
                <div class="portlet-body">
                    <div class="tab-content">
                        <!-- PERSONAL INFO TAB -->
                        <div class="tab-pane active" id="tab_2_1">
                          <p>Configure the following parameters for ticket validation</p>
                          <div class="row">
                            <div class="col-md-5">
                                <form method="POST", name="ticketkey">
                                  {% csrf_token %}
                                  <input type="hidden" name="keyselect" value="keyselect">
                                  <label for="key">Attribute</label>
                                  <select name="key" class="form-control" onchange="ticketkey.submit();">
                                    {% if selected_key %}
                                      <option value="{{ selected_key }}">{{ selected_key }}</option>
                                    {% endif %}
                                    {% for key, value in ticket %}
                                        <option value="{{ key }}">{{ key }}</option>
                                    {% endfor %}
                                  </select>
                                </form>
                            </div>
                            <div class="col-md-1">
                              <form method="POST">
                                <input type="hidden" name="savevalidation" value="savevalidation">
                                <input type="hidden" name="selected_key" value="{{ selected_key }}">
                                <input type="hidden" name="entity" value="Ticket">
                                {% csrf_token %}
                                <label for="operator">Operator</label>
                                <select name="operator" class="form-control">
                                  {% for key, value in OPERATORS.items %}
                                      <option value="{{ key }}">{{ key }}</option>
                                  {% endfor %}
                                </select>
                            </div>
                            <div class="col-md-6">
                              {% if values %}
                              <label for="value">Value</label>
                              <select name="value" class="form-control">
                                {% for value in values %}
                                    <option value="{{ value.key }}">{{ value.key }}</option>
                                {% endfor %}
                              </select>
                              {% else %}
                                <label for="value">Value</label>
                                <input class="form-control" type="text" name="value" placeholder="No picklist entity for this field. Enter manual value"/><br>
                              {% endif %}
                            </div>
                            <input type="submit" style="margin-top: 10px;" />
                          </form>
                          </div>
                        </div>
                        <!-- END PERSONAL INFO TAB -->
                        <!-- CHANGE AVATAR TAB -->
                        <div class="tab-pane" id="tab_2_2">
                          <a class="btn green" href="{% url 'create_picklist_database' %}">Create Picklist Module</a>
                        </div>
                        <!-- END CHANGE AVATAR TAB -->
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-md-8">
            <div class="portlet light ">
                <div class="portlet-title tabbable-line">
                    <div class="caption caption-md">
                        <i class="icon-globe theme-font hide"></i>
                        <span class="caption-subject font-blue-madison bold uppercase">Existing Validations</span>
                    </div>
                    <ul class="nav nav-tabs">
                        <li class="active">
                            <a href="#tab_3_1" data-toggle="tab">Tickets</a>
                        </li>
                        <li>
                            <a href="#tab_3_2" data-toggle="tab">Opportunities</a>
                        </li>
                    </ul>
                </div>
                <div class="portlet-body">
                    <div class="tab-content">
                        <!-- PERSONAL INFO TAB -->
                        <div class="tab-pane active" id="tab_3_1">
                              <div class="table-scrollable">
                                  <table class="table table-striped table-bordered table-advance table-hover">
                                      <thead>
                                          <tr>
                                              <th>Entity</th>
                                              <th class="hidden-xs">Attribute</th>
                                              <th>Operator</th>
                                              <th>Value</th>
                                              <th>Actions</th>
                                          </tr>
                                      </thead>
                                      <tbody>
                                        {% for validation in existing_validations %}
                                          <tr>
                                              <td class="highlight">{{ validation.entity }}</td>
                                              <td class="hidden-xs">{{ validation.key }}</td>
                                              <td>{{ validation.operator }}</td>
                                              <td>{{ validation.value }}</td>
                                              <td>
                                                  <!-- <a href="javascript:;" class="btn btn-outline btn-circle btn-sm green">
                                                      <i class="fa fa-edit"></i> Edit </a> -->
                                                  <form method="POST", name="existing_validations_delete_form", id="existing_validations_delete_form">
                                                    {% csrf_token %}
                                                    <input type="hidden" name="existing_validations_delete" value="{{ validation.id }}">
                                                    <a onclick="document.forms['existing_validations_delete_form'].submit();" class="btn btn-outline btn-circle red btn-sm black">
                                                      <i class="fa fa-trash-o"></i> Delete </a>
                                                  </form>
                                              </td>
                                          </tr>
                                          {% endfor %}
                                      </tbody>
                                  </table>
                              </div>
                        </div>
                        <!-- END PERSONAL INFO TAB -->
                        <!-- CHANGE AVATAR TAB -->
                        <div class="tab-pane" id="tab_3_2">
                          <a class="btn green" href="{% url 'create_picklist_database' %}">Create Picklist Module</a>
                        </div>
                        <!-- END CHANGE AVATAR TAB -->
                    </div>
                </div>
            </div>
        </div>
    </div>
  </div>
</div>

{% endblock %}
